"use strict";var Order=require("../../../models/order"),moment=require("moment");function orderController(){return{store:function(r,t){var e=r.body,n=e.phone,s=e.address;if(!n||!s)return r.flash("error","Please fill all the fields."),t.redirect("/cart");new Order({customerId:r.user._id,items:r.session.cart.items,phone:n,address:s}).save().then(function(e){return r.flash("success","Order placed Successfully"),delete r.session.cart,t.redirect("/customer/orders")}).catch(function(e){return r.flash("error","Something went wrong"),t.redirect("/cart")})},index:function(r,t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Order.find({customerId:r.user._id},null,{sort:{createdAt:-1}}));case 2:n=e.sent,t.header("Cache-Control","no-store"),t.render("customers/orders",{orders:n,moment:moment});case 5:case"end":return e.stop()}})}}}module.exports=orderController;
//# sourceMappingURL=orderController.min.js.map
