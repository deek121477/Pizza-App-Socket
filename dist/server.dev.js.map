{"version":3,"sources":["server.js"],"names":["require","config","express","app","ejs","path","expressLayout","PORT","process","env","mongoose","session","flash","MongoDbStore","connect","MONGO_CONNECTION_URL","useNewUrlParser","useCreateIndex","useUnifiedTopology","useFindAndModify","connection","once","console","log","err","use","secret","COOKIE_SECRET","resave","store","create","mongoUrl","saveUninitialized","cookie","maxAge","json","req","res","next","locals","set","join","__dirname","listen"],"mappings":";;AAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,IAAMC,OAAO,GAAGF,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMG,GAAG,GAAGD,OAAO,EAAnB;;AACA,IAAME,GAAG,GAAGJ,OAAO,CAAC,KAAD,CAAnB;;AACA,IAAMK,IAAI,GAAGL,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMM,aAAa,GAAGN,OAAO,CAAC,qBAAD,CAA7B;;AACA,IAAMO,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;;AACA,IAAMG,QAAQ,GAAGV,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAMW,OAAO,GAAGX,OAAO,CAAC,iBAAD,CAAvB;;AACA,IAAMY,KAAK,GAAGZ,OAAO,CAAC,eAAD,CAArB;;AACA,IAAMa,YAAY,GAAGb,OAAO,CAAC,eAAD,CAA5B,C,CAGA;;;AAGAU,QAAQ,CAACI,OAAT,CAAiBN,OAAO,CAACC,GAAR,CAAYM,oBAA7B,EAAmD;AAAEC,EAAAA,eAAe,EAAE,IAAnB;AAAyBC,EAAAA,cAAc,EAAC,IAAxC;AAA8CC,EAAAA,kBAAkB,EAAE,IAAlE;AAAwEC,EAAAA,gBAAgB,EAAG;AAA3F,CAAnD;AACA,IAAMC,UAAU,GAAGV,QAAQ,CAACU,UAA5B;AACAA,UAAU,CAACC,IAAX,CAAgB,MAAhB,EAAwB,YAAM;AAC1BC,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACH,CAFD,WAES,UAAAC,GAAG,EAAI;AACZF,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACH,CAJD,E,CAUA;;AACApB,GAAG,CAACsB,GAAJ,CAAQd,OAAO,CAAC;AAChBe,EAAAA,MAAM,EAAElB,OAAO,CAACC,GAAR,CAAYkB,aADJ;AAEhBC,EAAAA,MAAM,EAAE,KAFQ;AAGhBC,EAAAA,KAAK,EAAEhB,YAAY,CAACiB,MAAb,CAAoB;AACvBC,IAAAA,QAAQ,EAAEvB,OAAO,CAACC,GAAR,CAAYM;AADC,GAApB,CAHS;AAMhBiB,EAAAA,iBAAiB,EAAE,KANH;AAOhBC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,MAAM,EAAE,OAAO,EAAP,GAAY,EAAZ,GAAiB;AAA3B,GAPQ,CAOwB;;AAPxB,CAAD,CAAf;AAaA/B,GAAG,CAACsB,GAAJ,CAAQb,KAAK,EAAb,E,CAGA;;AACAT,GAAG,CAACsB,GAAJ,CAAQvB,OAAO,UAAP,CAAe,QAAf,CAAR;AACAC,GAAG,CAACsB,GAAJ,CAAQvB,OAAO,CAACiC,IAAR,EAAR,E,CAEA;;AACAhC,GAAG,CAACsB,GAAJ,CAAQ,UAACW,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAmB;AACxBD,EAAAA,GAAG,CAACE,MAAJ,CAAW5B,OAAX,GAAqByB,GAAG,CAACzB,OAAzB;AACA2B,EAAAA,IAAI;AACN,CAHD,E,CAKA;;AAEAnC,GAAG,CAACsB,GAAJ,CAAQnB,aAAR;AACAH,GAAG,CAACqC,GAAJ,CAAQ,OAAR,EAAiBnC,IAAI,CAACoC,IAAL,CAAUC,SAAV,EAAqB,kBAArB,CAAjB;AACAvC,GAAG,CAACqC,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;;AAEAxC,OAAO,CAAC,cAAD,CAAP,CAAwBG,GAAxB;;AAGAA,GAAG,CAACwC,MAAJ,CAAW,IAAX,EAAiB,YAAM;AACnBrB,EAAAA,OAAO,CAACC,GAAR,6BAAiChB,IAAjC;AACH,CAFD","sourcesContent":["require('dotenv').config()\r\nconst express = require('express')\r\nconst app = express()\r\nconst ejs = require('ejs')\r\nconst path = require('path')\r\nconst expressLayout = require('express-ejs-layouts')\r\nconst PORT = process.env.PORT || 3000\r\nconst mongoose = require('mongoose')\r\nconst session = require('express-session')\r\nconst flash = require('express-flash')\r\nconst MongoDbStore = require('connect-mongo')\r\n\r\n\r\n// Database connection\r\n\r\n\r\nmongoose.connect(process.env.MONGO_CONNECTION_URL, { useNewUrlParser: true, useCreateIndex:true, useUnifiedTopology: true, useFindAndModify : true });\r\nconst connection = mongoose.connection;\r\nconnection.once('open', () => {\r\n    console.log('Database connected...');\r\n}).catch(err => {\r\n    console.log('Connection failed...')\r\n});\r\n\r\n\r\n\r\n\r\n\r\n// Session config\r\napp.use(session({\r\nsecret: process.env.COOKIE_SECRET,\r\nresave: false,\r\nstore: MongoDbStore.create({\r\n    mongoUrl: process.env.MONGO_CONNECTION_URL\r\n}),\r\nsaveUninitialized: false,\r\ncookie: { maxAge: 1000 * 60 * 60 * 24 } // 24 hour\r\n}))\r\n\r\n\r\n\r\n\r\napp.use(flash())\r\n\r\n\r\n//Assets\r\napp.use(express.static('public'))\r\napp.use(express.json())\r\n\r\n//Global middlewares\r\napp.use((req, res, next) =>{\r\n   res.locals.session = req.session\r\n   next()\r\n})\r\n\r\n//set template engine\r\n\r\napp.use(expressLayout)\r\napp.set('views', path.join(__dirname, '/resources/views'))\r\napp.set('view engine', 'ejs')\r\n\r\nrequire('./routes/web')(app)\r\n\r\n\r\napp.listen(3000, () => {\r\n    console.log(`Listening on port ${PORT}`)\r\n})"],"file":"server.dev.js"}