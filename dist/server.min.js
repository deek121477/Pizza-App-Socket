"use strict";require("dotenv").config();var express=require("express"),app=express(),ejs=require("ejs"),path=require("path"),expressLayout=require("express-ejs-layouts"),PORT=process.env.PORT||3e3,mongoose=require("mongoose"),session=require("express-session"),flash=require("express-flash"),MongoDbStore=require("connect-mongo"),passport=require("passport");mongoose.connect(process.env.MONGO_CONNECTION_URL,{useNewUrlParser:!0,useCreateIndex:!0,useUnifiedTopology:!0,useFindAndModify:!0});var connection=mongoose.connection;connection.once("open",function(){console.log("Database connected...")}).catch(function(e){console.log("Connection failed...")});var passportInit=require("./app/config/passport");passportInit(passport),app.use(passport.initialize()),app.use(passport.session()),app.use(session({secret:process.env.COOKIE_SECRET,resave:!1,store:MongoDbStore.create({mongoUrl:process.env.MONGO_CONNECTION_URL}),saveUninitialized:!1,cookie:{maxAge:864e5}})),app.use(flash()),app.use(express.static("public")),app.use(express.urlencoded({extended:!1})),app.use(express.json()),app.use(function(e,s,o){s.locals.session=e.session,o()}),app.use(expressLayout),app.set("views",path.join(__dirname,"/resources/views")),app.set("view engine","ejs"),require("./routes/web")(app),app.listen(3e3,function(){console.log("Listening on port ".concat(PORT))});
//# sourceMappingURL=server.min.js.map
